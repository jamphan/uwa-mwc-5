

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documentation &mdash; UWAste  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Server database" href="../server-database/overview.html" />
    <link rel="prev" title="Listener" href="overview.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> UWAste
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">Listener</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Listener</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#stoppablethreads">StoppableThreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#listeners">Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workers">Workers</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server-database/overview.html">Server database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-database/api.html">Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Web-application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../web-application/overview.html">Web Application</a></li>
</ul>
<p class="caption"><span class="caption-text">Mote</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mote/overview.html">Mote</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UWAste</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Listener/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="stoppablethreads">
<h2>StoppableThreads<a class="headerlink" href="#stoppablethreads" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="uwaPySense.listenerutils.StoppableThread">
<em class="property">class </em><code class="descclassname">uwaPySense.listenerutils.</code><code class="descname">StoppableThread</code><span class="sig-paren">(</span><em>rest=0.001</em>, <em>event=&lt;threading.Event object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.listenerutils.StoppableThread" title="Permalink to this definition">¶</a></dt>
<dd><p>A thread which has flags to determine whether or not it should
abruptly be stopped or not. All objects that are derived from this class
will be stopped when the stop() routine is called by any thread</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rest</strong> (<em>float</em>) – This numeric should be used in the main run() loop as
a specified time for the thread to ‘rest’ every iteration</li>
<li><strong>event</strong> (<em>threading.Event</em>) – An event, which when set will stop the
thread. This parameter is a kwarg as some applications may require
a global stop event, or conversely may want independent threads</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="uwaPySense.listenerutils.StoppableThread.isStopped">
<code class="descname">isStopped</code><a class="headerlink" href="#uwaPySense.listenerutils.StoppableThread.isStopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns TRUE if a stop event was raised</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.listenerutils.StoppableThread.clean_up">
<code class="descname">clean_up</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.listenerutils.StoppableThread.clean_up" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows derived classes to specify how to clean up their
processes on a stop event.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">isStopped</code></dt>
<dd><p>Checks to see if the event has been set</p>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.listenerutils.StoppableThread.rest">
<code class="descname">rest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.listenerutils.StoppableThread.rest" title="Permalink to this definition">¶</a></dt>
<dd><p>Resting is essential to ensure that the process does not flood with
several iterations in the main loop (that is indefinite…)</p>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.listenerutils.StoppableThread.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.listenerutils.StoppableThread.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>This routine will stop all threads of class StoppableThread
as all classes that are listening to the threading event ._stop_event
will be set on stop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SystemError</span></code> – On fail due to .clean_up() method</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="listeners">
<h2>Listeners<a class="headerlink" href="#listeners" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="uwaPySense.Listener">
<em class="property">class </em><code class="descclassname">uwaPySense.</code><code class="descname">Listener</code><span class="sig-paren">(</span><em>serialPort</em>, <em>message_prototype</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Listener" title="Permalink to this definition">¶</a></dt>
<dd><p>The Listener is only responsible for listening to messages on the serial
line and storing them to queue. This ensures that the serial TX buffer never
overflows, or there are no issues with the data stream from the less power-
-ful device whilst the main thread is busy performing more complex operations
(such as pushing information to the network)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>serialPort</strong> (<em>serial.serial</em>) – An open serial port object with read and
write methods</li>
<li><strong>message_prototype</strong> (<em>uwaPySense.messages.Msg</em>) – This is the class prototype
for the message structure to use.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="uwaPySense.Listener._queue">
<code class="descname">_queue</code><a class="headerlink" href="#uwaPySense.Listener._queue" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a shared memory space between this object
and the child Worker object. This is the primary method of
communication between the threads.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">queue.Queue</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="uwaPySense.Listener._worker">
<code class="descname">_worker</code><a class="headerlink" href="#uwaPySense.Listener._worker" title="Permalink to this definition">¶</a></dt>
<dd><p>The child thread which must handle all the write
and processing operations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="#uwaPySense.Worker" title="uwaPySense.Worker">Worker</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Listener.clean_up">
<code class="descname">clean_up</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Listener.clean_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Final clean up when the thread stops</p>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Listener.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Listener.run" title="Permalink to this definition">¶</a></dt>
<dd><p>The main loop for the Listener thread. Note this overrides the
threading.Thread method, and hence will be called upon .start()
of this thread.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SystemError</span></code> – if there is no Worker assigned to the thread</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Listener.set_worker">
<code class="descname">set_worker</code><span class="sig-paren">(</span><em>w</em><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Listener.set_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the worker for the listener. This must be set prior to starting
the Listener thread</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>w</strong> (<a class="reference internal" href="#uwaPySense.Worker" title="uwaPySense.Worker"><em>uwaPySense.Worker</em></a>) – The worker that will perform the complex
operations for the Listener</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">On success</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">True</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> – When the arg passes is not of type
uwaPySense.listenerutils.StoppableThread</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="workers">
<h2>Workers<a class="headerlink" href="#workers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="uwaPySense.Worker">
<em class="property">class </em><code class="descclassname">uwaPySense.</code><code class="descname">Worker</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Responsible for acting on messages recieved by the Listener</p>
<dl class="attribute">
<dt id="uwaPySense.Worker._registrar">
<code class="descname">_registrar</code><a class="headerlink" href="#uwaPySense.Worker._registrar" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of functions that the worker is to
perform on the queue items. If this list blank, the messages
are are taken out of queue and ultimately lost.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Worker.assign_to">
<code class="descname">assign_to</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Worker.assign_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the worker to a queue to act on</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_queue</strong> (<em>queue.Queue</em>) – This is a shared memory space between the
parent Listener instance and this instance. This is the
primary method of communication between the threads</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> – If the argument passed is not of type queue.Queue</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Worker.get_register">
<code class="descname">get_register</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Worker.get_register" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a decorator to allow users to specify what work to
add. Functions defined with the returned decrator will be added to
the registrar, which is called during the operation of the Worker
thread</p>
</dd></dl>

<dl class="method">
<dt id="uwaPySense.Worker.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uwaPySense.Worker.run" title="Permalink to this definition">¶</a></dt>
<dd><p>The main loop for the Worker thread. Note this overrides the
threading.Thread method, and hence will be called upon .start()
of this thread.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../server-database/overview.html" class="btn btn-neutral float-right" title="Server database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Listener" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Group 5.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>